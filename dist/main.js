(()=>{"use strict";const e=new class{constructor(){this._gameBoard=["","","","","","","","",""]}get gameBoard(){return this._gameBoard}set gameBoard(e){this._gameBoard=e}addToGameBoard=(e,r)=>{this._gameBoard.splice(e,1,r)};isGameBoardFull=()=>9===this._gameBoard.length&&!this._gameBoard.includes("");printGameBoard=()=>{console.log(`\n         ${this._gameBoard[0]} | ${this._gameBoard[1]} | ${this._gameBoard[2]}\n        ---+---+---\n         ${this._gameBoard[3]} | ${this._gameBoard[4]} | ${this._gameBoard[5]}\n        ---+---+---\n         ${this._gameBoard[6]} | ${this._gameBoard[7]} | ${this._gameBoard[8]}\n        `)};emptyGameBoard=()=>{for(let e=0;e<this._gameBoard.length;e++)this._gameBoard[e]=""}};class r{constructor(e,r){this._name=e,this._playerSymbol=r,this._score=0}get name(){return this._name}set name(e){this._name=e}get playerSymbol(){return this._playerSymbol}set playerSymbol(e){this._playerSymbol=e}get score(){return this._score}set score(e){this._score=e}}const a=new class{constructor(){this._player1=new r("player1","X"),this._player2=new r("player2","O"),this._playerTurn=this._player1}get playerOne(){return this._player1}get playerTwo(){return this._player2}set playerOne(e){this._player1=e}set playerTwo(e){this._player2=e}get playerTurn(){return this._playerTurn}set playerTurn(e){this._playerTurn=e}determineResult=()=>{let r=e.gameBoard;const a=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let e=0;e<a.length;e++){const[t,s,l]=a[e],n=r[t],i=r[s],o=r[l];if(""!==n&&n===i&&i===o)return"WIN!"}return e.isGameBoardFull()?"TIE!":""};startGameApp=(r,a)=>{e.emptyGameBoard(),this.createNewPlayers(r,a)};createNewPlayers=(e,r)=>{this._player1.name=e,this._player2.name=r};addSymbolToGameBoard=(r,a)=>{e.addToGameBoard(r,a)};isGameBoardCellFull=r=>""!==e.gameBoard[r];switchPlayerTurn=()=>{this._playerTurn=this._playerTurn===this._player1?this._player2:this._player1};restartGame=()=>{e.emptyGameBoard(),this._playerTurn=this._player1};incrementPlayerScore=e=>{e.name===this._player1.name?this._player1.score+=1:this._player2.score+=1}},t=new class{constructor(){this._playerOneInput=document.querySelector("#player-one"),this._playerTwoInput=document.querySelector("#player-two"),this._gameForm=document.querySelector(".game-form"),this._gameBoard=document.querySelector(".game-board"),this._cells=document.querySelectorAll(".cell"),this._scoreDisplay=document.querySelector(".score-display"),this._playerNameForm=document.querySelector("#player-name-form"),this._resultParagraph=document.querySelector(".winner-paragraph"),this._restartButton=document.querySelector(".restart-button"),this._restartButton.addEventListener("click",this.restartButtonClickHandler),this._playerOneNameSpan=document.querySelector("#player-one-name"),this._playerOneScoreSpan=document.querySelector("#player-one-score"),this._playerTwoNameSpan=document.querySelector("#player-two-name"),this._playerTwoScoreSpan=document.querySelector("#player-two-score")}startGameAppUI=()=>{this._playerNameForm.addEventListener("submit",(e=>{let r=this._playerOneInput.value,t=this._playerTwoInput.value;a.startGameApp(r,t),this._gameForm.style.display="none",this._gameBoard.style.display="block",e.preventDefault(),this.startGameUI()}))};startGameUI=()=>{this.displayPlayerTurn(a.playerTurn),this.displayPlayersScore(a.playerOne,a.playerTwo),this._scoreDisplay.hidden=!1,this._cells.forEach((e=>{e.removeEventListener("click",this.cellClickHandler)})),this._cells.forEach((e=>{e.addEventListener("click",this.cellClickHandler)}))};cellClickHandler=e=>{const r=e.target,t=r.getAttribute("data-cell-index"),s=a.playerTurn;if(a.isGameBoardCellFull(t))return void alert("This Cell is Full");this.displaySymbolToGame(r,s.playerSymbol),a.addSymbolToGameBoard(t,s.playerSymbol);let l=a.determineResult();this.displayResult(s,l),a.switchPlayerTurn(),this.displayPlayersScore(a.playerOne,a.playerTwo),this.displayPlayerTurn(a.playerTurn)};restartButtonClickHandler=()=>{a.restartGame(),this.resetGameDisplay(),this.startGameUI()};displaySymbolToGame=(e,r)=>{const a=document.createElement("p");a.textContent=r,e.appendChild(a)};displayResult=(e,r)=>{""!==r&&("WIN!"===r?(this._resultParagraph.innerHTML="Winner is "+e.name,a.incrementPlayerScore(e)):"TIE!"===r&&(this._resultParagraph.innerHTML=r),this._resultParagraph.hidden=!1,this._restartButton.hidden=!1,this._cells.forEach((e=>{e.classList.add("disabled")})))};displayPlayerTurn=e=>{const r=document.querySelector(".player-turn-header");r.innerHTML=`Player Turn: ${e.name} (${e.playerSymbol})`,r.hidden=!1};resetGameDisplay=()=>{this._cells.forEach((e=>{e.innerHTML="",e.classList.remove("disabled")})),this._resultParagraph.hidden=!0,this._restartButton.hidden=!0};displayPlayersScore=(e,r)=>{this._playerOneNameSpan.innerHTML=e.name,this._playerOneScoreSpan.innerHTML=e.score,this._playerTwoNameSpan.innerHTML=r.name,this._playerTwoScoreSpan.innerHTML=r.score}};document.addEventListener("DOMContentLoaded",(()=>{t.startGameAppUI()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBbURBLFlBakRBLE1BQ0ksV0FBQUEsR0FFSUMsS0FBS0MsV0FBYSxDQUFDLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUN2RCxDQUdBLGFBQUlDLEdBQ0EsT0FBT0YsS0FBS0MsVUFDaEIsQ0FHQSxhQUFJQyxDQUFVQyxHQUNWSCxLQUFLQyxXQUFhRSxDQUN0QixDQUdBQyxlQUFpQixDQUFDQyxFQUFXQyxLQUV6Qk4sS0FBS0MsV0FBV00sT0FBT0YsRUFBVyxFQUFHQyxFQUFhLEVBSXRERSxnQkFBa0IsSUFFb0IsSUFBM0JSLEtBQUtDLFdBQVdRLFNBQWlCVCxLQUFLQyxXQUFXUyxTQUFTLElBSXJFQyxlQUFpQixLQUNiQyxRQUFRQyxJQUFJLGNBQ1RiLEtBQUtDLFdBQVcsUUFBUUQsS0FBS0MsV0FBVyxRQUFRRCxLQUFLQyxXQUFXLHFDQUVoRUQsS0FBS0MsV0FBVyxRQUFRRCxLQUFLQyxXQUFXLFFBQVFELEtBQUtDLFdBQVcscUNBRWhFRCxLQUFLQyxXQUFXLFFBQVFELEtBQUtDLFdBQVcsUUFBUUQsS0FBS0MsV0FBVyxlQUNqRSxFQUlOYSxlQUFpQixLQUViLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJZixLQUFLQyxXQUFXUSxPQUFRTSxJQUN4Q2YsS0FBS0MsV0FBV2MsR0FBSyxFQUN6QixHQzVDTyxNQUFNQyxFQUVqQixXQUFBakIsQ0FBWWtCLEVBQWFDLEdBQ3JCbEIsS0FBS21CLE1BQVFGLEVBQ2JqQixLQUFLb0IsY0FBZ0JGLEVBQ3JCbEIsS0FBS3FCLE9BQVMsQ0FDbEIsQ0FHQSxRQUFJQyxHQUNBLE9BQU90QixLQUFLbUIsS0FDaEIsQ0FHQSxRQUFJRyxDQUFLQyxHQUNMdkIsS0FBS21CLE1BQVFJLENBQ2pCLENBR0EsZ0JBQUlqQixHQUNBLE9BQU9OLEtBQUtvQixhQUNoQixDQUdBLGdCQUFJZCxDQUFha0IsR0FDYnhCLEtBQUtvQixjQUFnQkksQ0FDekIsQ0FHQSxTQUFJQyxHQUNBLE9BQU96QixLQUFLcUIsTUFDaEIsQ0FHQSxTQUFJSSxDQUFNQyxHQUNOMUIsS0FBS3FCLE9BQVNLLENBQ2xCLEVDNkVKLFlBN0dBLE1BQ0ksV0FBQTNCLEdBRUlDLEtBQUsyQixTQUFXLElBQUlYLEVBQU8sVUFBVyxLQUN0Q2hCLEtBQUs0QixTQUFXLElBQUlaLEVBQU8sVUFBVyxLQUN0Q2hCLEtBQUs2QixZQUFjN0IsS0FBSzJCLFFBQzVCLENBR0EsYUFBSUcsR0FDQSxPQUFPOUIsS0FBSzJCLFFBQ2hCLENBR0EsYUFBSUksR0FDQSxPQUFPL0IsS0FBSzRCLFFBQ2hCLENBR0EsYUFBSUUsQ0FBVUUsR0FDVmhDLEtBQUsyQixTQUFXSyxDQUNwQixDQUdBLGFBQUlELENBQVVDLEdBQ1ZoQyxLQUFLNEIsU0FBV0ksQ0FDcEIsQ0FHQSxjQUFJQyxHQUNBLE9BQU9qQyxLQUFLNkIsV0FDaEIsQ0FHQSxjQUFJSSxDQUFXQyxHQUNYbEMsS0FBSzZCLFlBQWNLLENBQ3ZCLENBR0FDLGdCQUFrQixLQUNkLElBQUlqQyxFQUFZLEVBQVVBLFVBQzFCLE1BQU1rQyxFQUFzQixDQUN4QixDQUFDLEVBQUcsRUFBRyxHQUFJLENBQUMsRUFBRyxFQUFHLEdBQUksQ0FBQyxFQUFHLEVBQUcsR0FDN0IsQ0FBQyxFQUFHLEVBQUcsR0FBSSxDQUFDLEVBQUcsRUFBRyxHQUFJLENBQUMsRUFBRyxFQUFHLEdBQzdCLENBQUMsRUFBRyxFQUFHLEdBQUksQ0FBQyxFQUFHLEVBQUcsSUFHdEIsSUFBSyxJQUFJQyxFQUFRLEVBQUdBLEVBQVFELEVBQW9CM0IsT0FBUTRCLElBQVMsQ0FDN0QsTUFBT0MsRUFBR0MsRUFBR0MsR0FBS0osRUFBb0JDLEdBQ2hDSSxFQUFZdkMsRUFBVW9DLEdBQ3RCSSxFQUFheEMsRUFBVXFDLEdBQ3ZCSSxFQUFZekMsRUFBVXNDLEdBRTVCLEdBQWtCLEtBQWRDLEdBQW9CQSxJQUFjQyxHQUFjQSxJQUFlQyxFQUMvRCxNQUFPLE1BRWYsQ0FFQSxPQUFJLEVBQVVuQyxrQkFDSCxPQUdKLEVBQUUsRUFJYm9DLGFBQWUsQ0FBQ0MsRUFBZUMsS0FDM0IsRUFBVWhDLGlCQUNWZCxLQUFLK0MsaUJBQWlCRixFQUFlQyxFQUFjLEVBSXZEQyxpQkFBbUIsQ0FBQ0YsRUFBZUMsS0FDL0I5QyxLQUFLMkIsU0FBU0wsS0FBT3VCLEVBQ3JCN0MsS0FBSzRCLFNBQVNOLEtBQU93QixDQUFhLEVBSXRDRSxxQkFBdUIsQ0FBQzNDLEVBQVdDLEtBQy9CLEVBQVVGLGVBQWVDLEVBQVdDLEVBQWEsRUFJckQyQyxvQkFBdUI1QyxHQUN1QixLQUFuQyxFQUFVSCxVQUFVRyxHQUkvQjZDLGlCQUFtQixLQUNmbEQsS0FBSzZCLFlBQWM3QixLQUFLNkIsY0FBZ0I3QixLQUFLMkIsU0FBVzNCLEtBQUs0QixTQUFXNUIsS0FBSzJCLFFBQVEsRUFJekZ3QixZQUFjLEtBQ1YsRUFBVXJDLGlCQUNWZCxLQUFLNkIsWUFBYzdCLEtBQUsyQixRQUFRLEVBSXBDeUIscUJBQXdCQyxJQUNoQkEsRUFBTy9CLE9BQVN0QixLQUFLMkIsU0FBU0wsS0FDOUJ0QixLQUFLMkIsU0FBU0YsT0FBUyxFQUV2QnpCLEtBQUs0QixTQUFTSCxPQUFTLENBQzNCLEdDcUNSLE1BOUlBLE1BQ0ksV0FBQTFCLEdBRUlDLEtBQUtzRCxnQkFBa0JDLFNBQVNDLGNBQWMsZUFDOUN4RCxLQUFLeUQsZ0JBQWtCRixTQUFTQyxjQUFjLGVBQzlDeEQsS0FBSzBELFVBQVlILFNBQVNDLGNBQWMsY0FDeEN4RCxLQUFLQyxXQUFhc0QsU0FBU0MsY0FBYyxlQUN6Q3hELEtBQUsyRCxPQUFTSixTQUFTSyxpQkFBaUIsU0FDeEM1RCxLQUFLNkQsY0FBZ0JOLFNBQVNDLGNBQWMsa0JBQzVDeEQsS0FBSzhELGdCQUFrQlAsU0FBU0MsY0FBYyxxQkFHOUN4RCxLQUFLK0QsaUJBQW1CUixTQUFTQyxjQUFjLHFCQUcvQ3hELEtBQUtnRSxlQUFpQlQsU0FBU0MsY0FBYyxtQkFDN0N4RCxLQUFLZ0UsZUFBZUMsaUJBQWlCLFFBQVNqRSxLQUFLa0UsMkJBRW5EbEUsS0FBS21FLG1CQUFxQlosU0FBU0MsY0FBYyxvQkFDakR4RCxLQUFLb0Usb0JBQXNCYixTQUFTQyxjQUFjLHFCQUVsRHhELEtBQUtxRSxtQkFBcUJkLFNBQVNDLGNBQWMsb0JBQ2pEeEQsS0FBS3NFLG9CQUFzQmYsU0FBU0MsY0FBYyxvQkFDdEQsQ0FHQWUsZUFBaUIsS0FDYnZFLEtBQUs4RCxnQkFBZ0JHLGlCQUFpQixVQUFXTyxJQUM3QyxJQUFJQyxFQUFzQnpFLEtBQUtzRCxnQkFBZ0JvQixNQUMzQ0MsRUFBc0IzRSxLQUFLeUQsZ0JBQWdCaUIsTUFDL0MsRUFBVTlCLGFBQWE2QixFQUFxQkUsR0FFNUMzRSxLQUFLMEQsVUFBVWtCLE1BQU1DLFFBQVUsT0FDL0I3RSxLQUFLQyxXQUFXMkUsTUFBTUMsUUFBVSxRQUVoQ0wsRUFBRU0saUJBRUY5RSxLQUFLK0UsYUFBYSxHQUNwQixFQUlOQSxZQUFjLEtBQ1YvRSxLQUFLZ0Ysa0JBQWtCLEVBQVUvQyxZQUNqQ2pDLEtBQUtpRixvQkFBb0IsRUFBVW5ELFVBQVcsRUFBVUMsV0FDeEQvQixLQUFLNkQsY0FBY3FCLFFBQVMsRUFHNUJsRixLQUFLMkQsT0FBT3dCLFNBQVNDLElBQ2pCQSxFQUFLQyxvQkFBb0IsUUFBU3JGLEtBQUtzRixpQkFBaUIsSUFJNUR0RixLQUFLMkQsT0FBT3dCLFNBQVNDLElBQ2pCQSxFQUFLbkIsaUJBQWlCLFFBQVNqRSxLQUFLc0YsaUJBQWlCLEdBQ3ZELEVBSU5BLGlCQUFvQkMsSUFDaEIsTUFBTUgsRUFBT0csRUFBTUMsT0FDYm5GLEVBQVkrRSxFQUFLSyxhQUFhLG1CQUM5QkMsRUFBZ0IsRUFBVXpELFdBQ2hDLEdBQUksRUFBVWdCLG9CQUFvQjVDLEdBRTlCLFlBREFzRixNQUFNLHFCQUdWM0YsS0FBSzRGLG9CQUFvQlIsRUFBTU0sRUFBY3BGLGNBQzdDLEVBQVUwQyxxQkFBcUIzQyxFQUFXcUYsRUFBY3BGLGNBQ3hELElBQUl1RixFQUFTLEVBQVUxRCxrQkFDdkJuQyxLQUFLOEYsY0FBY0osRUFBZUcsR0FDbEMsRUFBVTNDLG1CQUVWbEQsS0FBS2lGLG9CQUFvQixFQUFVbkQsVUFBVyxFQUFVQyxXQUN4RC9CLEtBQUtnRixrQkFBa0IsRUFBVS9DLFdBQVcsRUFJaERpQywwQkFBNEIsS0FDeEIsRUFBVWYsY0FDVm5ELEtBQUsrRixtQkFDTC9GLEtBQUsrRSxhQUFhLEVBSXRCYSxvQkFBc0IsQ0FBQ1IsRUFBTWxFLEtBRXpCLE1BQU04RSxFQUFZekMsU0FBUzBDLGNBQWMsS0FDekNELEVBQVVFLFlBQWNoRixFQUN4QmtFLEVBQUtlLFlBQVlILEVBQVUsRUFJL0JGLGNBQWdCLENBQUNNLEVBQVFQLEtBQ04sS0FBWEEsSUFFa0IsU0FBWEEsR0FDUDdGLEtBQUsrRCxpQkFBaUJzQyxVQUFZLGFBQWVELEVBQU85RSxLQUN4RCxFQUFVOEIscUJBQXFCZ0QsSUFDYixTQUFYUCxJQUNQN0YsS0FBSytELGlCQUFpQnNDLFVBQVlSLEdBSXRDN0YsS0FBSytELGlCQUFpQm1CLFFBQVMsRUFDL0JsRixLQUFLZ0UsZUFBZWtCLFFBQVMsRUFHN0JsRixLQUFLMkQsT0FBT3dCLFNBQVFDLElBQ2hCQSxFQUFLa0IsVUFBVUMsSUFBSSxXQUFXLElBQ2hDLEVBSU52QixrQkFBcUIvQyxJQUNqQixNQUFNdUUsRUFBbUJqRCxTQUFTQyxjQUFjLHVCQUNoRGdELEVBQWlCSCxVQUFZLGdCQUFnQnBFLEVBQVdYLFNBQVNXLEVBQVczQixnQkFDNUVrRyxFQUFpQnRCLFFBQVMsQ0FBSyxFQUluQ2EsaUJBQW1CLEtBRWYvRixLQUFLMkQsT0FBT3dCLFNBQVNDLElBQ2pCQSxFQUFLaUIsVUFBWSxHQUNqQmpCLEVBQUtrQixVQUFVRyxPQUFPLFdBQVcsSUFFckN6RyxLQUFLK0QsaUJBQWlCbUIsUUFBUyxFQUMvQmxGLEtBQUtnRSxlQUFla0IsUUFBUyxDQUFJLEVBSXJDRCxvQkFBc0IsQ0FBQ3lCLEVBQVNDLEtBQzVCM0csS0FBS21FLG1CQUFtQmtDLFVBQVlLLEVBQVFwRixLQUM1Q3RCLEtBQUtvRSxvQkFBb0JpQyxVQUFZSyxFQUFRakYsTUFFN0N6QixLQUFLcUUsbUJBQW1CZ0MsVUFBWU0sRUFBUXJGLEtBQzVDdEIsS0FBS3NFLG9CQUFvQitCLFVBQVlNLEVBQVFsRixLQUFLLEdDMUkxRDhCLFNBQVNVLGlCQUFpQixvQkFBb0IsS0FDMUMsRUFBR00sZ0JBQWdCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXByb2plY3QtdGljLXRhYy10b2UvLi9zcmMvbW9kdWxlcy9HYW1lQm9hcmQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1wcm9qZWN0LXRpYy10YWMtdG9lLy4vc3JjL21vZHVsZXMvUGxheWVyLmpzIiwid2VicGFjazovL29kaW4tcHJvamVjdC10aWMtdGFjLXRvZS8uL3NyYy9tb2R1bGVzL0dhbWVMb2dpYy5qcyIsIndlYnBhY2s6Ly9vZGluLXByb2plY3QtdGljLXRhYy10b2UvLi9zcmMvbW9kdWxlcy9VSS5qcyIsIndlYnBhY2s6Ly9vZGluLXByb2plY3QtdGljLXRhYy10b2UvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIEdhbWVCb2FyZCBjbGFzcyBtYW5hZ2VzIHRoZSBnYW1lIGJvYXJkIGFuZCBpdHMgc3RhdGUuXHJcblxyXG5jbGFzcyBHYW1lQm9hcmQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhbiBlbXB0eSBnYW1lIGJvYXJkIHdpdGggOSBjZWxscy5cclxuICAgICAgICB0aGlzLl9nYW1lQm9hcmQgPSBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBnYW1lIGJvYXJkLlxyXG4gICAgZ2V0IGdhbWVCb2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2FtZUJvYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCBhIG5ldyBnYW1lIGJvYXJkIHN0YXRlLlxyXG4gICAgc2V0IGdhbWVCb2FyZChuZXdHYW1lQm9hcmQpIHtcclxuICAgICAgICB0aGlzLl9nYW1lQm9hcmQgPSBuZXdHYW1lQm9hcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUGxhY2UgYSBwbGF5ZXIncyBzeW1ib2wgb24gdGhlIGdhbWUgYm9hcmQgYXQgYSBzcGVjaWZpYyBjZWxsIGluZGV4LlxyXG4gICAgYWRkVG9HYW1lQm9hcmQgPSAoY2VsbEluZGV4LCBwbGF5ZXJTeW1ib2wpID0+IHtcclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGNlbGwgd2l0aCB0aGUgcGxheWVyJ3Mgc3ltYm9sLlxyXG4gICAgICAgIHRoaXMuX2dhbWVCb2FyZC5zcGxpY2UoY2VsbEluZGV4LCAxLCBwbGF5ZXJTeW1ib2wpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoZSBnYW1lIGJvYXJkIGlzIGZ1bGwsIGluZGljYXRpbmcgYSB0aWUuXHJcbiAgICBpc0dhbWVCb2FyZEZ1bGwgPSAoKSA9PiB7XHJcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIDkgY2VsbHMgYW5kIG5vbmUgb2YgdGhlbSBhcmUgZW1wdHksIHRoZSBib2FyZCBpcyBmdWxsLlxyXG4gICAgICAgIHJldHVybiB0aGlzLl9nYW1lQm9hcmQubGVuZ3RoID09PSA5ICYmICF0aGlzLl9nYW1lQm9hcmQuaW5jbHVkZXMoXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGlzcGxheSB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZ2FtZSBib2FyZCBvbiB0aGUgY29uc29sZS5cclxuICAgIHByaW50R2FtZUJvYXJkID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBcclxuICAgICAgICAgJHt0aGlzLl9nYW1lQm9hcmRbMF19IHwgJHt0aGlzLl9nYW1lQm9hcmRbMV19IHwgJHt0aGlzLl9nYW1lQm9hcmRbMl19XHJcbiAgICAgICAgLS0tKy0tLSstLS1cclxuICAgICAgICAgJHt0aGlzLl9nYW1lQm9hcmRbM119IHwgJHt0aGlzLl9nYW1lQm9hcmRbNF19IHwgJHt0aGlzLl9nYW1lQm9hcmRbNV19XHJcbiAgICAgICAgLS0tKy0tLSstLS1cclxuICAgICAgICAgJHt0aGlzLl9nYW1lQm9hcmRbNl19IHwgJHt0aGlzLl9nYW1lQm9hcmRbN119IHwgJHt0aGlzLl9nYW1lQm9hcmRbOF19XHJcbiAgICAgICAgYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xlYXIgdGhlIGdhbWUgYm9hcmQsIHJlc2V0dGluZyBpdCB0byBhbiBlbXB0eSBzdGF0ZS5cclxuICAgIGVtcHR5R2FtZUJvYXJkID0gKCkgPT4ge1xyXG4gICAgICAgIC8vIFJlc2V0IGFsbCBjZWxscyB0byBlbXB0eSBzdHJpbmdzLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fZ2FtZUJvYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dhbWVCb2FyZFtpXSA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgYW4gaW5zdGFuY2Ugb2YgdGhlIEdhbWVCb2FyZCBjbGFzcyBmb3IgZWFzeSBhY2Nlc3MuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBHYW1lQm9hcmQ7XHJcbiIsIi8vIFRoZSBQbGF5ZXIgY2xhc3MgcmVwcmVzZW50cyBhIGdhbWUgcGFydGljaXBhbnQuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xyXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHBsYXllciB3aXRoIGEgbmFtZSBhbmQgc3ltYm9sLlxyXG4gICAgY29uc3RydWN0b3IoaW5pdGlhbE5hbWUsIHN5bWJvbCkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBpbml0aWFsTmFtZTsgICAgICAvLyBTZXQgdGhlIHBsYXllcidzIG5hbWUuXHJcbiAgICAgICAgdGhpcy5fcGxheWVyU3ltYm9sID0gc3ltYm9sOyAgIC8vIEFzc2lnbiB0aGUgcGxheWVyJ3Mgc3ltYm9sLlxyXG4gICAgICAgIHRoaXMuX3Njb3JlID0gMDsgICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHBsYXllcidzIHNjb3JlLlxyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgcGxheWVyJ3MgbmFtZS5cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoYW5nZSB0aGUgcGxheWVyJ3MgbmFtZS5cclxuICAgIHNldCBuYW1lKG5ld05hbWUpIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gbmV3TmFtZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgdGhlIHN5bWJvbCBhc3NvY2lhdGVkIHdpdGggdGhlIHBsYXllci5cclxuICAgIGdldCBwbGF5ZXJTeW1ib2woKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXllclN5bWJvbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGFuZ2UgdGhlIHBsYXllcidzIHN5bWJvbC5cclxuICAgIHNldCBwbGF5ZXJTeW1ib2wobmV3UGxheWVyU3ltYm9sKSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyU3ltYm9sID0gbmV3UGxheWVyU3ltYm9sO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgcGxheWVyJ3MgY3VycmVudCBzY29yZS5cclxuICAgIGdldCBzY29yZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2NvcmU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBwbGF5ZXIncyBzY29yZS5cclxuICAgIHNldCBzY29yZShuZXdTY29yZSkge1xyXG4gICAgICAgIHRoaXMuX3Njb3JlID0gbmV3U2NvcmU7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gSW1wb3J0IHRoZSBHYW1lQm9hcmQgYW5kIFBsYXllciBjbGFzc2VzLlxyXG5pbXBvcnQgR2FtZUJvYXJkIGZyb20gXCIuL0dhbWVCb2FyZFwiO1xyXG5pbXBvcnQgUGxheWVyIGZyb20gXCIuL1BsYXllclwiO1xyXG5cclxuLy8gVGhlIEdhbWVMb2dpYyBjbGFzcyBtYW5hZ2VzIHRoZSBnYW1lIGxvZ2ljIGFuZCBzdGF0ZS5cclxuXHJcbmNsYXNzIEdhbWVMb2dpYyB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvLyBDcmVhdGUgUGxheWVyIDEgd2l0aCBzeW1ib2wgWCBhbmQgUGxheWVyIDIgd2l0aCBzeW1ib2wgTy5cclxuICAgICAgICB0aGlzLl9wbGF5ZXIxID0gbmV3IFBsYXllcihcInBsYXllcjFcIiwgXCJYXCIpO1xyXG4gICAgICAgIHRoaXMuX3BsYXllcjIgPSBuZXcgUGxheWVyKFwicGxheWVyMlwiLCBcIk9cIik7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyVHVybiA9IHRoaXMuX3BsYXllcjE7IC8vIFBsYXllciAxIGdvZXMgZmlyc3QuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IFBsYXllciAxLlxyXG4gICAgZ2V0IHBsYXllck9uZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGxheWVyMTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgUGxheWVyIDIuXHJcbiAgICBnZXQgcGxheWVyVHdvKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wbGF5ZXIyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNldCBQbGF5ZXIgMS5cclxuICAgIHNldCBwbGF5ZXJPbmUobmV3UGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyMSA9IG5ld1BsYXllcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXQgUGxheWVyIDIuXHJcbiAgICBzZXQgcGxheWVyVHdvKG5ld1BsYXllcikge1xyXG4gICAgICAgIHRoaXMuX3BsYXllcjIgPSBuZXdQbGF5ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IHBsYXllcidzIHR1cm4uXHJcbiAgICBnZXQgcGxheWVyVHVybigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGxheWVyVHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZXQgdGhlIGN1cnJlbnQgcGxheWVyJ3MgdHVybi5cclxuICAgIHNldCBwbGF5ZXJUdXJuKG5ld1BsYXllclR1cm4pIHtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJUdXJuID0gbmV3UGxheWVyVHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZXRlcm1pbmUgdGhlIHJlc3VsdCBvZiB0aGUgZ2FtZS5cclxuICAgIGRldGVybWluZVJlc3VsdCA9ICgpID0+IHtcclxuICAgICAgICBsZXQgZ2FtZUJvYXJkID0gR2FtZUJvYXJkLmdhbWVCb2FyZDtcclxuICAgICAgICBjb25zdCB3aW5uaW5nQ29tYmluYXRpb25zID0gW1xyXG4gICAgICAgICAgICBbMCwgMSwgMl0sIFszLCA0LCA1XSwgWzYsIDcsIDhdLCAvLyBSb3dzXHJcbiAgICAgICAgICAgIFswLCAzLCA2XSwgWzEsIDQsIDddLCBbMiwgNSwgOF0sIC8vIENvbHVtbnNcclxuICAgICAgICAgICAgWzAsIDQsIDhdLCBbMiwgNCwgNl0gICAgICAgICAgICAgIC8vIERpYWdvbmFsc1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB3aW5uaW5nQ29tYmluYXRpb25zLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBjb25zdCBbYSwgYiwgY10gPSB3aW5uaW5nQ29tYmluYXRpb25zW2luZGV4XTtcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RDZWxsID0gZ2FtZUJvYXJkW2FdO1xyXG4gICAgICAgICAgICBjb25zdCBzZWNvbmRDZWxsID0gZ2FtZUJvYXJkW2JdO1xyXG4gICAgICAgICAgICBjb25zdCB0aGlyZENlbGwgPSBnYW1lQm9hcmRbY107XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlyc3RDZWxsICE9PSBcIlwiICYmIGZpcnN0Q2VsbCA9PT0gc2Vjb25kQ2VsbCAmJiBzZWNvbmRDZWxsID09PSB0aGlyZENlbGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIldJTiFcIjsgLy8gUmV0dXJuIFdJTiByZXN1bHQuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChHYW1lQm9hcmQuaXNHYW1lQm9hcmRGdWxsKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiVElFIVwiOyAvLyBSZXR1cm4gVElFIHJlc3VsdC5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBcIlwiOyAvLyBSZXR1cm4gYW4gZW1wdHkgc3RyaW5nLCBpbmRpY2F0aW5nIHRoZSBnYW1lIGlzIG9uZ29pbmcuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3RhcnQgYSBuZXcgZ2FtZSBhcHBsaWNhdGlvbiB3aXRoIGN1c3RvbSBwbGF5ZXIgbmFtZXMuXHJcbiAgICBzdGFydEdhbWVBcHAgPSAocGxheWVyT25lTmFtZSwgcGxheWVyVHdvTmFtZSkgPT4ge1xyXG4gICAgICAgIEdhbWVCb2FyZC5lbXB0eUdhbWVCb2FyZCgpOyAvLyBDbGVhciB0aGUgZ2FtZSBib2FyZC5cclxuICAgICAgICB0aGlzLmNyZWF0ZU5ld1BsYXllcnMocGxheWVyT25lTmFtZSwgcGxheWVyVHdvTmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIGFuZCBhc3NpZ24gbmV3IHBsYXllciBuYW1lcy5cclxuICAgIGNyZWF0ZU5ld1BsYXllcnMgPSAocGxheWVyT25lTmFtZSwgcGxheWVyVHdvTmFtZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3BsYXllcjEubmFtZSA9IHBsYXllck9uZU5hbWU7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyMi5uYW1lID0gcGxheWVyVHdvTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgYSBwbGF5ZXIncyBzeW1ib2wgdG8gdGhlIGdhbWUgYm9hcmQgYXQgYSBzcGVjaWZpYyBjZWxsIGluZGV4LlxyXG4gICAgYWRkU3ltYm9sVG9HYW1lQm9hcmQgPSAoY2VsbEluZGV4LCBwbGF5ZXJTeW1ib2wpID0+IHtcclxuICAgICAgICBHYW1lQm9hcmQuYWRkVG9HYW1lQm9hcmQoY2VsbEluZGV4LCBwbGF5ZXJTeW1ib2wpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIGEgY2VsbCBvbiB0aGUgZ2FtZSBib2FyZCBpcyBhbHJlYWR5IG9jY3VwaWVkLlxyXG4gICAgaXNHYW1lQm9hcmRDZWxsRnVsbCA9IChjZWxsSW5kZXgpID0+IHtcclxuICAgICAgICByZXR1cm4gR2FtZUJvYXJkLmdhbWVCb2FyZFtjZWxsSW5kZXhdICE9PSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFN3aXRjaCB0aGUgcGxheWVyJ3MgdHVybi5cclxuICAgIHN3aXRjaFBsYXllclR1cm4gPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyVHVybiA9IHRoaXMuX3BsYXllclR1cm4gPT09IHRoaXMuX3BsYXllcjEgPyB0aGlzLl9wbGF5ZXIyIDogdGhpcy5fcGxheWVyMTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXN0YXJ0IHRoZSBnYW1lIGJ5IGNsZWFyaW5nIHRoZSBnYW1lIGJvYXJkIGFuZCBzZXR0aW5nIHRoZSBwbGF5ZXIgdHVybiB0byBQbGF5ZXIgMS5cclxuICAgIHJlc3RhcnRHYW1lID0gKCkgPT4ge1xyXG4gICAgICAgIEdhbWVCb2FyZC5lbXB0eUdhbWVCb2FyZCgpO1xyXG4gICAgICAgIHRoaXMuX3BsYXllclR1cm4gPSB0aGlzLl9wbGF5ZXIxO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEluY3JlbWVudCBhIHBsYXllcidzIHNjb3JlLlxyXG4gICAgaW5jcmVtZW50UGxheWVyU2NvcmUgPSAocGxheWVyKSA9PiB7XHJcbiAgICAgICAgaWYgKHBsYXllci5uYW1lID09PSB0aGlzLl9wbGF5ZXIxLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyMS5zY29yZSArPSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BsYXllcjIuc2NvcmUgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEV4cG9ydCBhbiBpbnN0YW5jZSBvZiB0aGUgR2FtZUxvZ2ljIGNsYXNzIGZvciBlYXN5IGFjY2Vzcy5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IEdhbWVMb2dpYztcclxuIiwiLy8gSW1wb3J0IHRoZSBHYW1lTG9naWMgY2xhc3MgdG8gbWFuYWdlIHRoZSBnYW1lIGxvZ2ljLlxyXG5pbXBvcnQgR2FtZUxvZ2ljIGZyb20gXCIuL0dhbWVMb2dpY1wiO1xyXG5cclxuLy8gVGhlIFVJIGNsYXNzIGhhbmRsZXMgdGhlIHVzZXIgaW50ZXJmYWNlIGFuZCBpbnRlcmFjdGlvbnMgZm9yIHRoZSBnYW1lLlxyXG5cclxuY2xhc3MgVUkge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gVmFyaWFibGVzIHRvIHN0b3JlIHBsYXllciBpbnB1dHMsIGdhbWUgZWxlbWVudHMsIGFuZCBpbml0aWFsIHBsYXllciBzZXR1cC5cclxuICAgICAgICB0aGlzLl9wbGF5ZXJPbmVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheWVyLW9uZVwiKTtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJUd29JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheWVyLXR3b1wiKTtcclxuICAgICAgICB0aGlzLl9nYW1lRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLWZvcm0nKTtcclxuICAgICAgICB0aGlzLl9nYW1lQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FtZS1ib2FyZCcpO1xyXG4gICAgICAgIHRoaXMuX2NlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNlbGwnKTtcclxuICAgICAgICB0aGlzLl9zY29yZURpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNjb3JlLWRpc3BsYXlcIik7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyTmFtZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxheWVyLW5hbWUtZm9ybScpO1xyXG5cclxuICAgICAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHBhcmFncmFwaCBkaXNwbGF5aW5nIHRoZSBnYW1lIHJlc3VsdC5cclxuICAgICAgICB0aGlzLl9yZXN1bHRQYXJhZ3JhcGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbm5lci1wYXJhZ3JhcGhcIik7XHJcblxyXG4gICAgICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgcmVzdGFydCBidXR0b24uXHJcbiAgICAgICAgdGhpcy5fcmVzdGFydEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmVzdGFydC1idXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5fcmVzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucmVzdGFydEJ1dHRvbkNsaWNrSGFuZGxlcik7XHJcblxyXG4gICAgICAgIHRoaXMuX3BsYXllck9uZU5hbWVTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5ZXItb25lLW5hbWVcIik7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyT25lU2NvcmVTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5ZXItb25lLXNjb3JlXCIpO1xyXG5cclxuICAgICAgICB0aGlzLl9wbGF5ZXJUd29OYW1lU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheWVyLXR3by1uYW1lXCIpO1xyXG4gICAgICAgIHRoaXMuX3BsYXllclR3b1Njb3JlU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheWVyLXR3by1zY29yZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbml0aWFsaXplIHRoZSBnYW1lIGFwcGxpY2F0aW9uIGFuZCBkaXNwbGF5IHBsYXllciBzZXR1cC5cclxuICAgIHN0YXJ0R2FtZUFwcFVJID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3BsYXllck5hbWVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBwbGF5ZXJPbmVJbnB1dFZhbHVlID0gdGhpcy5fcGxheWVyT25lSW5wdXQudmFsdWU7XHJcbiAgICAgICAgICAgIGxldCBwbGF5ZXJUd29JbnB1dFZhbHVlID0gdGhpcy5fcGxheWVyVHdvSW5wdXQudmFsdWU7XHJcbiAgICAgICAgICAgIEdhbWVMb2dpYy5zdGFydEdhbWVBcHAocGxheWVyT25lSW5wdXRWYWx1ZSwgcGxheWVyVHdvSW5wdXRWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9nYW1lRm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB0aGlzLl9nYW1lQm9hcmQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0R2FtZVVJKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3RhcnQgdGhlIGdhbWUgVUkgYW5kIHNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGNlbGxzLlxyXG4gICAgc3RhcnRHYW1lVUkgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5UGxheWVyVHVybihHYW1lTG9naWMucGxheWVyVHVybik7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5UGxheWVyc1Njb3JlKEdhbWVMb2dpYy5wbGF5ZXJPbmUsIEdhbWVMb2dpYy5wbGF5ZXJUd28pO1xyXG4gICAgICAgIHRoaXMuX3Njb3JlRGlzcGxheS5oaWRkZW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHByZXZpb3VzIGV2ZW50IGxpc3RlbmVycyBmcm9tIGNlbGxzLlxyXG4gICAgICAgIHRoaXMuX2NlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcclxuICAgICAgICAgICAgY2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2VsbENsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBuZXcgY2xpY2sgZXZlbnQgbGlzdGVuZXJzIHRvIGNlbGxzLlxyXG4gICAgICAgIHRoaXMuX2NlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcclxuICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2VsbENsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY3Rpb24gdG8gaGFuZGxlIGNlbGwgY2xpY2sgZXZlbnRzIGR1cmluZyB0aGUgZ2FtZS5cclxuICAgIGNlbGxDbGlja0hhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBjZWxsID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIGNvbnN0IGNlbGxJbmRleCA9IGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLWNlbGwtaW5kZXgnKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50UGxheWVyID0gR2FtZUxvZ2ljLnBsYXllclR1cm47XHJcbiAgICAgICAgaWYgKEdhbWVMb2dpYy5pc0dhbWVCb2FyZENlbGxGdWxsKGNlbGxJbmRleCkpIHtcclxuICAgICAgICAgICAgYWxlcnQoXCJUaGlzIENlbGwgaXMgRnVsbFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpc3BsYXlTeW1ib2xUb0dhbWUoY2VsbCwgY3VycmVudFBsYXllci5wbGF5ZXJTeW1ib2wpO1xyXG4gICAgICAgIEdhbWVMb2dpYy5hZGRTeW1ib2xUb0dhbWVCb2FyZChjZWxsSW5kZXgsIGN1cnJlbnRQbGF5ZXIucGxheWVyU3ltYm9sKTtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gR2FtZUxvZ2ljLmRldGVybWluZVJlc3VsdCgpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVJlc3VsdChjdXJyZW50UGxheWVyLCByZXN1bHQpO1xyXG4gICAgICAgIEdhbWVMb2dpYy5zd2l0Y2hQbGF5ZXJUdXJuKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlzcGxheVBsYXllcnNTY29yZShHYW1lTG9naWMucGxheWVyT25lLCBHYW1lTG9naWMucGxheWVyVHdvKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlQbGF5ZXJUdXJuKEdhbWVMb2dpYy5wbGF5ZXJUdXJuKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gSGFuZGxlciBmb3IgdGhlIHJlc3RhcnQgYnV0dG9uLlxyXG4gICAgcmVzdGFydEJ1dHRvbkNsaWNrSGFuZGxlciA9ICgpID0+IHtcclxuICAgICAgICBHYW1lTG9naWMucmVzdGFydEdhbWUoKTtcclxuICAgICAgICB0aGlzLnJlc2V0R2FtZURpc3BsYXkoKTtcclxuICAgICAgICB0aGlzLnN0YXJ0R2FtZVVJKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRnVuY3Rpb24gdG8gZGlzcGxheSBhIHBsYXllcidzIHN5bWJvbCAoWCBvciBPKSBvbiBhIGdhbWUgY2VsbC5cclxuICAgIGRpc3BsYXlTeW1ib2xUb0dhbWUgPSAoY2VsbCwgc3ltYm9sKSA9PiB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHBhcmFncmFwaCBlbGVtZW50IHRvIGRpc3BsYXkgdGhlIHN5bWJvbC5cclxuICAgICAgICBjb25zdCBzeW1ib2xUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgICBzeW1ib2xUYWcudGV4dENvbnRlbnQgPSBzeW1ib2w7XHJcbiAgICAgICAgY2VsbC5hcHBlbmRDaGlsZChzeW1ib2xUYWcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uIHRvIGRpc3BsYXkgdGhlIGdhbWUgcmVzdWx0ICh3aW4sIHRpZSwgb3Igb25nb2luZykuXHJcbiAgICBkaXNwbGF5UmVzdWx0ID0gKHdpbm5lciwgcmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IFwiV0lOIVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc3VsdFBhcmFncmFwaC5pbm5lckhUTUwgPSBcIldpbm5lciBpcyBcIiArIHdpbm5lci5uYW1lO1xyXG4gICAgICAgICAgICBHYW1lTG9naWMuaW5jcmVtZW50UGxheWVyU2NvcmUod2lubmVyKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gXCJUSUUhXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVzdWx0UGFyYWdyYXBoLmlubmVySFRNTCA9IHJlc3VsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNob3cgdGhlIHJlc3VsdCBwYXJhZ3JhcGggYW5kIHJlc3RhcnQgYnV0dG9uLlxyXG4gICAgICAgIHRoaXMuX3Jlc3VsdFBhcmFncmFwaC5oaWRkZW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9yZXN0YXJ0QnV0dG9uLmhpZGRlbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIGNlbGxzIGFuZCBhZGQgdGhlICdkaXNhYmxlZCcgY2xhc3MuXHJcbiAgICAgICAgdGhpcy5fY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcclxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uIHRvIGRpc3BsYXkgdGhlIGN1cnJlbnQgcGxheWVyJ3MgdHVybi5cclxuICAgIGRpc3BsYXlQbGF5ZXJUdXJuID0gKHBsYXllclR1cm4pID0+IHtcclxuICAgICAgICBjb25zdCBwbGF5ZXJUdXJuSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItdHVybi1oZWFkZXJcIik7XHJcbiAgICAgICAgcGxheWVyVHVybkhlYWRlci5pbm5lckhUTUwgPSBgUGxheWVyIFR1cm46ICR7cGxheWVyVHVybi5uYW1lfSAoJHtwbGF5ZXJUdXJuLnBsYXllclN5bWJvbH0pYDtcclxuICAgICAgICBwbGF5ZXJUdXJuSGVhZGVyLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uIHRvIHJlc2V0IHRoZSBnYW1lIGRpc3BsYXksIGNsZWFyaW5nIGNlbGxzIGFuZCBoaWRpbmcgcmVzdWx0IGVsZW1lbnRzLlxyXG4gICAgcmVzZXRHYW1lRGlzcGxheSA9ICgpID0+IHtcclxuICAgICAgICAvLyBFbXB0eSBnYW1lIGNlbGxzIGFuZCBlbmFibGUgdGhlbS5cclxuICAgICAgICB0aGlzLl9jZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XHJcbiAgICAgICAgICAgIGNlbGwuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0UGFyYWdyYXBoLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcmVzdGFydEJ1dHRvbi5oaWRkZW4gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uIHRvIGRpc3BsYXkgcGxheWVycycgbmFtZXMgYW5kIHNjb3Jlcy5cclxuICAgIGRpc3BsYXlQbGF5ZXJzU2NvcmUgPSAocGxheWVyMSwgcGxheWVyMikgPT4ge1xyXG4gICAgICAgIHRoaXMuX3BsYXllck9uZU5hbWVTcGFuLmlubmVySFRNTCA9IHBsYXllcjEubmFtZTtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJPbmVTY29yZVNwYW4uaW5uZXJIVE1MID0gcGxheWVyMS5zY29yZTtcclxuXHJcbiAgICAgICAgdGhpcy5fcGxheWVyVHdvTmFtZVNwYW4uaW5uZXJIVE1MID0gcGxheWVyMi5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3BsYXllclR3b1Njb3JlU3Bhbi5pbm5lckhUTUwgPSBwbGF5ZXIyLnNjb3JlO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgYW4gaW5zdGFuY2Ugb2YgdGhlIFVJIGNsYXNzIGZvciBlYXN5IGFjY2Vzcy5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IFVJO1xyXG4iLCIvLyBJbXBvcnQgdGhlIFVJIG1vZHVsZSwgd2hpY2ggaGFuZGxlcyB0aGUgdXNlciBpbnRlcmZhY2UuXHJcbmltcG9ydCBVSSBmcm9tICcuL21vZHVsZXMvVUknO1xyXG5cclxuLy8gV2hlbiB0aGUgRE9NIGNvbnRlbnQgaXMgbG9hZGVkLCBzdGFydCB0aGUgZ2FtZSBVSS5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gICAgVUkuc3RhcnRHYW1lQXBwVUkoKTsgLy8gU3RhcnQgdGhlIHVzZXIgaW50ZXJmYWNlIGZvciBvdXIgZ2FtZSBhcHBsaWNhdGlvbi5cclxufSk7XHJcblxyXG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ0aGlzIiwiX2dhbWVCb2FyZCIsImdhbWVCb2FyZCIsIm5ld0dhbWVCb2FyZCIsImFkZFRvR2FtZUJvYXJkIiwiY2VsbEluZGV4IiwicGxheWVyU3ltYm9sIiwic3BsaWNlIiwiaXNHYW1lQm9hcmRGdWxsIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJwcmludEdhbWVCb2FyZCIsImNvbnNvbGUiLCJsb2ciLCJlbXB0eUdhbWVCb2FyZCIsImkiLCJQbGF5ZXIiLCJpbml0aWFsTmFtZSIsInN5bWJvbCIsIl9uYW1lIiwiX3BsYXllclN5bWJvbCIsIl9zY29yZSIsIm5hbWUiLCJuZXdOYW1lIiwibmV3UGxheWVyU3ltYm9sIiwic2NvcmUiLCJuZXdTY29yZSIsIl9wbGF5ZXIxIiwiX3BsYXllcjIiLCJfcGxheWVyVHVybiIsInBsYXllck9uZSIsInBsYXllclR3byIsIm5ld1BsYXllciIsInBsYXllclR1cm4iLCJuZXdQbGF5ZXJUdXJuIiwiZGV0ZXJtaW5lUmVzdWx0Iiwid2lubmluZ0NvbWJpbmF0aW9ucyIsImluZGV4IiwiYSIsImIiLCJjIiwiZmlyc3RDZWxsIiwic2Vjb25kQ2VsbCIsInRoaXJkQ2VsbCIsInN0YXJ0R2FtZUFwcCIsInBsYXllck9uZU5hbWUiLCJwbGF5ZXJUd29OYW1lIiwiY3JlYXRlTmV3UGxheWVycyIsImFkZFN5bWJvbFRvR2FtZUJvYXJkIiwiaXNHYW1lQm9hcmRDZWxsRnVsbCIsInN3aXRjaFBsYXllclR1cm4iLCJyZXN0YXJ0R2FtZSIsImluY3JlbWVudFBsYXllclNjb3JlIiwicGxheWVyIiwiX3BsYXllck9uZUlucHV0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX3BsYXllclR3b0lucHV0IiwiX2dhbWVGb3JtIiwiX2NlbGxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zY29yZURpc3BsYXkiLCJfcGxheWVyTmFtZUZvcm0iLCJfcmVzdWx0UGFyYWdyYXBoIiwiX3Jlc3RhcnRCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwicmVzdGFydEJ1dHRvbkNsaWNrSGFuZGxlciIsIl9wbGF5ZXJPbmVOYW1lU3BhbiIsIl9wbGF5ZXJPbmVTY29yZVNwYW4iLCJfcGxheWVyVHdvTmFtZVNwYW4iLCJfcGxheWVyVHdvU2NvcmVTcGFuIiwic3RhcnRHYW1lQXBwVUkiLCJlIiwicGxheWVyT25lSW5wdXRWYWx1ZSIsInZhbHVlIiwicGxheWVyVHdvSW5wdXRWYWx1ZSIsInN0eWxlIiwiZGlzcGxheSIsInByZXZlbnREZWZhdWx0Iiwic3RhcnRHYW1lVUkiLCJkaXNwbGF5UGxheWVyVHVybiIsImRpc3BsYXlQbGF5ZXJzU2NvcmUiLCJoaWRkZW4iLCJmb3JFYWNoIiwiY2VsbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjZWxsQ2xpY2tIYW5kbGVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJjdXJyZW50UGxheWVyIiwiYWxlcnQiLCJkaXNwbGF5U3ltYm9sVG9HYW1lIiwicmVzdWx0IiwiZGlzcGxheVJlc3VsdCIsInJlc2V0R2FtZURpc3BsYXkiLCJzeW1ib2xUYWciLCJjcmVhdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsIndpbm5lciIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsImFkZCIsInBsYXllclR1cm5IZWFkZXIiLCJyZW1vdmUiLCJwbGF5ZXIxIiwicGxheWVyMiJdLCJzb3VyY2VSb290IjoiIn0=